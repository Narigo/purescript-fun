# PureScript with pulp

The second session is to try out purescript for real now. This time, we use `pulp` and `bower` since `pulp` is needed 
for building our purescript code and `bower` for the registries. As mentioned in the [first 
session](../01-pure-purescript/), we now have a `Prelude` and other things we can use.

Let's try it!

## Initializing the project

The project is set up by executing the following command:

```
npm install --save-dev purescript pulp bower
```

You can use pulp to initialize the project like this: 
```
./node_modules/.bin/pulp init
```

This way we don't need to install the dependencies globally and just use what we just installed through NPM. Inside the 
`package.json` `scripts` field, we can use the dependency without adding `./node_modules/.bin/` in front of it and NPM 
will find the correct tool without having to set up a bigger environment.

As I've mentioned before, I like having the setup completely inside the project. Thankfully `pulp` does not mind being 
started out of a different directory.

## The resulting boilerplate

`pulp init` generates a lot of code, so I'm trying to make sense out of it. There are a few new directories set up and a
couple of new files. Let's analyze, what we got right now:

* `.gitignore`, our old friend used by git. Pulp adds a few ignore rules to avoid checking in caches used by purescript.
* `.purs-repl` looks like a "execute these commands when starting up a REPL" file. As it imports `Prelude` and those 
  imports are available on the REPL. By adding and removing `import Main`, we could prove this: `Main` adds a `greeting`
  function that gets exported.
* `bower.json` is more or less clear - it is the `package.json` for Bower and needed to fetch `Prelude` etc.
* `package.json` and `package-lock.json` were generated by `npm init` and saving of`purescript`, `pulp` and `bower`.
* `node_modules/` and `bower_components/` are NPM and Bower directories.
* `.psci_modules/`, `.pulp-cache/` and `output/` were generated when running the code (`pulp run`) or starting the REPL
  (`pulp repl`). The `output/` directory is the generated code from our own purescript. From a glance, the JavaScript 
  output looks actually quite nice. The type-information is gone, but it looks like we get at least somewhat readable 
  code out of it. Yes, I don't think I will debug the code, but it helps to understand how and why the purescript code 
  and concepts work. Maybe when doing something more complex, we can have another glance at the output and learn 
  something.
* `src/` is the main source directory. It consists of a `Main.purs` which obviously gets called when executing a `pulp 
  run`.
* `test/` will be run when executing `pulp test`. From the documentation, we should add `purescript-assert` to our 
  dependencies and start writing tests. Let's find out how that works in one of the next sessions. The quick start guide
  is pretty shallow on that regard (it hints that we might want to use the "Eff monad", we first need to figure out what
  that means).

